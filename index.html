<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Conferência de Jogos - Mega-Sena & Lotofácil</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f2f2f2;
        padding: 20px;
      }

      .container {
        max-width: 1000px;
        margin: auto;
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      h1 { text-align: center; color: #333; }

      label {
        font-weight: bold;
        margin-top: 15px;
        display: block;
      }

      textarea, input {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        font-size: 14px;
        border-radius: 5px;
        border: 1px solid #ccc;
        box-sizing: border-box;
      }

      textarea { height: 120px; }

      .resumo {
        background: #e9ecef;
        padding: 15px;
        border-radius: 6px;
        margin-top: 15px;
        font-weight: bold;
        line-height: 1.6;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .resumo-item {
        background: #fff;
        padding: 5px 10px;
        border-radius: 4px;
        border: 1px solid #ddd;
      }

      .categoria { margin-top: 20px; }
      .categoria h3 { border-bottom: 2px solid #ddd; padding-bottom: 5px; }

      .jogo {
        background: #f9f9f9;
        padding: 10px;
        border-radius: 6px;
        margin-bottom: 8px;
        border-left: 5px solid #ccc;
      }

      /* Cores baseadas em faixas de acertos */
      .acerto-alto { border-color: #4caf50; } /* Ganhou algo relevante */
      .acerto-medio { border-color: #2196f3; }
      .acerto-baixo { border-color: #999; }

      .numero {
        display: inline-block;
        margin: 2px;
        padding: 6px 10px;
        border-radius: 50%;
        background: #e0e0e0;
        font-size: 13px;
        min-width: 20px;
        text-align: center;
      }

      .acertou {
        background: #4caf50;
        color: #fff;
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>Conferência de Jogos</h1>
      
      <label>1. Insira seus jogos (1 por linha, números separados por vírgula ou espaço):</label>
      <textarea id="jogos" placeholder="Ex: 01,02,03,04,05..."></textarea>

      <label>2. Números sorteados:</label>
      <input id="sorteados" placeholder="Ex: 01,05,10,12..." />

      <div id="resultado"></div>
    </div>

    <script>
      const jogosEl = document.getElementById("jogos");
      const sorteadosEl = document.getElementById("sorteados");
      const resultadoEl = document.getElementById("resultado");

      // Ouve mudanças nos campos
      jogosEl.addEventListener("input", conferir);
      sorteadosEl.addEventListener("input", conferir);

      function conferir() {
        const txtJogos = jogosEl.value.trim();
        const txtSorteados = sorteadosEl.value.trim();

        if (!txtJogos || !txtSorteados) {
          resultadoEl.innerHTML = "";
          return;
        }

        // Processa sorteados (aceita vírgula ou espaço como separador)
        const sorteados = txtSorteados
          .split(/[\s,]+/)
          .map(n => n.padStart(2, '0'))
          .filter(n => n !== "");

        // Processa jogos
        const linhas = txtJogos.split("\n");
        const jogos = linhas.map(linha => {
            return linha.split(/[\s,]+/)
                        .map(n => n.padStart(2, '0'))
                        .filter(n => n !== "" && !isNaN(n));
        }).filter(j => j.length > 0);

        // Descobre o máximo de acertos possível (dinâmico para Mega ou Lotofácil)
        const maxPossivel = sorteados.length;
        let grupos = {};
        
        // Inicializa os grupos de 0 até o total de sorteados
        for(let i = 0; i <= maxPossivel; i++) {
            grupos[i] = [];
        }

        jogos.forEach((jogo, index) => {
          const acertosNoJogo = jogo.filter(n => sorteados.includes(n));
          const qtdAcertos = acertosNoJogo.length;
          
          if (grupos[qtdAcertos]) {
            grupos[qtdAcertos].push({ jogo, acertosNoJogo, index });
          }
        });

        // Monta o Resumo Superior
        let resumoHTML = `<div class="resumo"><strong>Total: ${jogos.length} jogos</strong>`;
        for (let i = maxPossivel; i >= 0; i--) {
            if (grupos[i].length > 0) {
                resumoHTML += `<span class="resumo-item">${i} acertos: ${grupos[i].length}</span>`;
            }
        }
        resumoHTML += `</div>`;

        // Monta a Listagem Detalhada
        let listaHTML = "";
        for (let i = maxPossivel; i >= 0; i--) {
          if (grupos[i].length === 0) continue;

          // Define classe de cor baseada na performance
          let corClasse = "acerto-baixo";
          if (i >= 11 && maxPossivel === 15) corClasse = "acerto-alto"; // Lotofácil premiada
          if (i >= 4 && maxPossivel === 6) corClasse = "acerto-alto";  // Mega premiada

          listaHTML += `
            <div class="categoria">
              <h3>${i} acerto${i !== 1 ? "s" : ""}</h3>
              ${grupos[i].map(item => `
                  <div class="jogo ${corClasse}">
                    <strong>Jogo ${item.index + 1}</strong> (${i} acertos)<br>
                    ${item.jogo.map(n => 
                        item.acertosNoJogo.includes(n) 
                        ? `<span class="numero acertou">${n}</span>` 
                        : `<span class="numero">${n}</span>`
                    ).join("")}
                  </div>
              `).join("")}
            </div>`;
        }

        resultadoEl.innerHTML = resumoHTML + listaHTML;
      }
    </script>
  </body>
</html>
